{"version":3,"sources":["components/calendar/calendar.js","components/navbar/Navbar.js","components/navbar/camion-de-transporte.png","components/map/icon-cluster-layer.js","components/map/Map.js","components/layers/layers.js","components/kpis/kpi_numvehicles.js","components/kpis/kpi_meanspeed.js","components/kpis/kpi_meandistance.js","components/kpis/kpi_consumedfuel.js","components/main/Main.js","components/charts/distance_chart.js","components/charts/driving_time_chart.js","components/charts/num_vehicles_chart.js","components/charts/exceptions_chart.js","components/charts/fuel_chart.js","components/charts/Charts.js","routes/routes.js","pages/App.js","reportWebVitals.js","index.js"],"names":["Collapse","ReactCollapse","GetCalendarDate","all","type","date","month","getMonth","getDate","getFullYear","CollapsableCalendar","props","_handleCalendarChange","ranges","calendar_onChange","isOpened","state","paragraphs","this","className","onClick","setState","id","calendar_ranges","editableDateInputs","onChange","moveRangeOnFirstSelection","dateDisplayFormat","weekStartsOn","React","Component","defaultProps","Navbar","params","src","alt","exact","activeClassName","to","href","aria-hidden","IconClusterLayer","changeFlags","somethingChanged","oldProps","rebuildIndex","dataChanged","sizeScale","index","Supercluster","maxZoom","radius","load","data","map","d","geometry","coordinates","getPosition","properties","z","Math","floor","context","viewport","zoom","getClusters","info","pickedObject","mode","object","cluster","objects","getLeaves","cluster_id","f","layerId","iconAtlas","iconMapping","IconLayer","getSubLayerProps","pickable","getIcon","size","point_count","undefined","getSize","min","CompositeLayer","INITIAL_VIEW_STATE","longitude","latitude","pitch","bearing","exceptionIds","color","label","getToolTip","layer","vehicle","html","distance","speed","startsWith","exception","exceptions","slice","excep","exceptionLabel","filter","exceptionData","type_exception","device_id","length","Map","data_veh","data_excep","filter_layers","height","width","useState","selectedVehicle","setSelectedVehicle","onHover","x","y","getLineColor","getLineWidth","layers","indexOf","vehiclesNoTunnel","features","vehiclesTunnel","push","GeoJsonLayer","stroked","filled","lineWidthMinPixels","parameters","depthTest","updateTriggers","extensions","PathStyleExtension","dash","getDashArray","dashJustified","dashGapPickable","layerName","filteredExceptions","IconMappingJson","initialViewState","controller","pickingRadius","style","position","getTooltip","mapboxApiAccessToken","animatedComponents","makeAnimated","layerOptions","value","colourStyles","control","styles","backgroundColor","option","isDisabled","isFocused","isSelected","chroma","alpha","css","contrast","cursor","multiValue","multiValueLabel","multiValueRemove","LayerSelector","onChange_layer_selection","closeMenuOnSelect","components","defaultValue","isMulti","options","GetNumIds","vehicles","lookup","Set","add","GetMeanSpeed","vehs","contador","totalSpeed","uniquevalue","has","round","GetMeanDistance","totalDistance","GetFuelGastado","fuels","fuel_vehs","total_fuel_gastado","distancia_recorrida","fuel_veh","diff_fuel","parseFloat","console","log","mean_gastado","GetNumExcep","makeCancelablePromise","promise","isCanceled","Promise","resolve","reject","then","val","catch","error","cancel","Main","startDate","Date","endDate","key","last_date_range","setDateRange","filtered_vehicles","filterVehicles","filtered_exceptions","filterExceptions","filtered_fuel","filterFuel","initial","filterLayers","setFilterLayers","fetchVehicles","fetchExceptions","fetchFuel","fetch_promises","setPromises","handleLayerSelectOption","newLayers","getTime","vehicles_files","exceptions_files","fuel_files","iterateDate","datestring","Moment","format","setDate","exceptions_filename","vehicles_filename","fuel_filename","filename","fetch","res","text","JSON","parse","err","new_vehicles","all_vehicles","concat","apply","new_exceptions","all_exceptions","new_fuel","all_fuel","DistanceChart","useCanvas","max","old_calendar_ranges","cur_calendar_ranges","newState","startDateString","endDateString","filteredData","myData","filterDataFromDates","reduce","acc","row","Infinity","BarSeries","VerticalBarSeriesCanvas","VerticalBarSeries","xType","xDistance","tickLabelAngle","DrivingTimeChart","daysWeek","hours","NumVehiclesChart","dictData","day","hour","heatmap_data","element","parseInt","num_vehs","Object","keys","index1","index2","exampleColorScale","scaleLinear","domain","range","xDomain","yType","yDomain","margin","orientation","colorType","getColor","stroke","strokeWidth","rectStyle","rx","ry","onValueMouseOver","v","onSeriesMouseOut","pointerEvents","labelAnchorX","labelAnchorY","getLabel","dic_values","dic_colors","exception_list","colors","i","EXTENDED_DISCRETE_COLOR_RANGE","LABEL_STYLE","fontSize","textAnchor","getKeyPath","node","parent","name","updateData","keyPath","children","child","hex","fill","fillOpacity","ExceptionsChart","pathValue","finalValue","clicked","oldState","children_vehicles","dic_vehicles","dic_all","entries","exception_data","forEach","exception_type","rule_id","value_rule","dic_excep","animation","hideRootNode","path","reverse","pathAsMap","join","onValueMouseOut","onValueClick","strokeOpacity","FuelChart","_forgetValue","_rememberValue","internaldata","fuel_data","marginTop","Chart","class","Routes","render","Charts","App","date_range","selection","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.8d77787a.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactCollapse from 'react-collapse';\r\nimport PropTypes from 'prop-types';\r\n \r\nimport { DateRange } from 'react-date-range';\r\n//import { addDays } from 'date-fns';\r\n\r\nimport 'react-calendar/dist/Calendar.css';\r\n\r\nimport \"./calendar.css\";\r\n\r\nconst {Collapse} = ReactCollapse;\r\n\r\nfunction GetCalendarDate(all){\r\n  const type = all['type']\r\n  const date = all['date'][0][type];\r\n  //console.log(date);\r\n  const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n  const month = monthNames[date.getMonth()];\r\n  \r\n  return date.getDate() + ' ' + month + ' ' + date.getFullYear()\r\n};\r\n\r\nclass CollapsableCalendar extends React.Component {\r\n  static propTypes = {\r\n    isOpened: PropTypes.bool\r\n  };\r\n  static defaultProps = {\r\n    isOpened: true\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    const {isOpened} = this.props;\r\n    this.state = {isOpened, paragraphs: 0};\r\n  }\r\n\r\n  _handleCalendarChange = (ranges) => {\r\n    //console.log(ranges);\r\n    this.props.calendar_onChange(ranges);\r\n  }\r\n  \r\n  render() {\r\n    const {isOpened} = this.state;\r\n    return (\r\n      <div className=\"all_calendar\">\r\n        <div className=\"dateBoxes\" onClick={() => this.setState({isOpened: !isOpened})}>\r\n          <div className=\"dateBox\" id=\"startDate\">\r\n            <p><GetCalendarDate date={this.props.calendar_ranges} type={'startDate'}/></p>\r\n          </div>\r\n          <div className=\"dateBox\" id=\"endDate\">\r\n            <p><GetCalendarDate date={this.props.calendar_ranges} type={'endDate'}/></p>\r\n          </div>\r\n        </div>\r\n        <Collapse isOpened={isOpened}>\r\n          <DateRange\r\n            editableDateInputs={true}\r\n            onChange={this._handleCalendarChange}\r\n            moveRangeOnFirstSelection={false}\r\n            ranges={this.props.calendar_ranges}\r\n            dateDisplayFormat=\"d MMM yyyy\"\r\n            weekStartsOn={1}\r\n          />\r\n        </Collapse>\r\n        \r\n       \r\n      </div>\r\n      \r\n    );\r\n    \r\n  }\r\n}\r\n\r\nexport default CollapsableCalendar;\r\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport './navbar.css';\nimport logo from './camion-de-transporte.png'\nimport 'react-calendar/dist/Calendar.css';\nimport CollapsableCalendar from '../calendar/calendar';\n\nconst Navbar = (params) => {\n\n  //console.log(params);\n\n  return (\n  <nav className=\"navbar\">\n    <div className=\"navbar__left\"> \n      <img id=\"logo_camion\" src={logo} alt=\"logo\"/>\n      <NavLink\n        exact\n        activeClassName=\"navbar__link--active\"\n        className=\"navbar__link\"\n        to=\"/\"\n      >\n        Home\n      </NavLink>\n      <NavLink\n        id=\"page2\"\n        activeClassName=\"navbar__link--active\"\n        className=\"navbar__link\"\n        to=\"/Charts\"\n      >\n        Charts\n      </NavLink>\n      \n\n    </div>\n\n    <div className=\"navbar__middle\">\n        <CollapsableCalendar\n                  isOpened={false}\n                  calendar_onChange={params.calendar_onChange}\n                  calendar_ranges={params.calendar_ranges}\n                /> \n        </div>\n        \n    <div className=\"navbar__right\">\n        <a href=\"#!\">           \n          <i\n            className=\"fa fa-user-o fa-2x text-lightblue\"\n            aria-hidden=\"true\"\n          ></i>\n        </a>\n      </div>\n  </nav>\n  );\n};\n\nexport default Navbar;","export default \"data:image/png;base64,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\"","import {CompositeLayer} from '@deck.gl/core';\r\nimport {IconLayer} from '@deck.gl/layers';\r\nimport Supercluster from 'supercluster';\r\n\r\n\r\nfunction getIconName(size) {\r\n  if (size === 0 || size === undefined) {\r\n    return 'marker-1';\r\n  }\r\n  if (size < 10) {\r\n    return `marker-${size}`;\r\n  }\r\n  if (size < 100) {\r\n    return `marker-${Math.floor(size / 10)}0`;\r\n  }\r\n  return 'marker-100';\r\n}\r\n\r\nfunction getIconSize(size) {\r\n  if (size === undefined) {\r\n    return 1;\r\n  }\r\n  else {\r\n    const icon_size = 1 + Math.min(100, size) / 150;\r\n    //console.log(icon_size);\r\n    return icon_size;\r\n  }\r\n}\r\n\r\nexport default class IconClusterLayer extends CompositeLayer {\r\n\r\n  shouldUpdateState({changeFlags}) {\r\n    return changeFlags.somethingChanged;\r\n  }\r\n\r\n  updateState({props, oldProps, changeFlags}) {\r\n    const rebuildIndex = changeFlags.dataChanged || props.sizeScale !== oldProps.sizeScale;\r\n\r\n    if (rebuildIndex) {\r\n      const index = new Supercluster({maxZoom: 16, radius: props.sizeScale / 3});\r\n      index.load(\r\n        props.data.map(d => ({\r\n          geometry: {coordinates: props.getPosition(d)},\r\n          properties: d\r\n        }))\r\n      );\r\n\r\n      //console.log(props.data)\r\n      //console.log(index)\r\n\r\n      this.setState({index});\r\n    }\r\n\r\n    const z = Math.floor(this.context.viewport.zoom);\r\n    if (rebuildIndex || z !== this.state.z) {\r\n      this.setState({\r\n        //data: this.state.index.getClusters([-180, -85, 180, 85], z),\r\n        data: this.state.index.getClusters([-320, -85, 320, 85], z),\r\n        z\r\n      });\r\n    }\r\n\r\n    //console.log(this.state)\r\n}\r\n\r\n  getPickingInfo({info, mode}) {\r\n    //console.log(info);\r\n    const pickedObject = info.object;\r\n    if (pickedObject) {\r\n      if (pickedObject.cluster /* && mode !== 'hover'*/) {\r\n        info.objects = this.state.index\r\n          .getLeaves(pickedObject.cluster_id, 25)\r\n          .map(f => f.properties);\r\n      }\r\n      info.object = pickedObject;\r\n    }\r\n    return info;\r\n  }\r\n\r\n  renderLayers() {\r\n    const {data} = this.state;\r\n    const {layerId, iconAtlas, iconMapping, sizeScale} = this.props;\r\n\r\n    //console.log(this.props);\r\n    //console.log(iconMapping);\r\n    //console.log(data);\r\n\r\n    return new IconLayer(\r\n      this.getSubLayerProps({\r\n        id: layerId,\r\n        data,\r\n        iconAtlas,\r\n        iconMapping,\r\n        sizeScale,\r\n        pickable: true,\r\n        getPosition: d => d.geometry.coordinates,\r\n        getIcon: d => getIconName(d.properties.point_count),\r\n        getSize: d => getIconSize(d.properties.point_count)\r\n      }))\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport DeckGL from '@deck.gl/react';\r\n//import {Deck} from '@deck.gl/core';\r\n\r\nimport {StaticMap} from 'react-map-gl';//, NavigationControl } from 'react-map-gl';\r\nimport {GeoJsonLayer} from '@deck.gl/layers';\r\nimport {PathStyleExtension} from '@deck.gl/extensions';\r\nimport IconClusterLayer from './icon-cluster-layer';\r\nimport IconMappingJson from './../../data/location-icon-mapping.json';\r\nimport './Map.css';\r\n//import exclamation from './../../exclamation.png'\r\nconst MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoibWFyaWFicmlsY3JldmkiLCJhIjoiY2ttbnV6c2xmMTB6bjJ3cnp4dWxubGF4bCJ9.GkqIHx503JnB4XujQxpNHA';\r\n\r\n// Viewport settings  \r\nconst INITIAL_VIEW_STATE = {\r\n  longitude: -3.70325,\r\n  latitude: 40.4167,\r\n  zoom: 13,\r\n  pitch: 0,\r\n  bearing: 0\r\n};\r\n\r\nexport const exceptionIds = [\r\n  {id: 'RulePostedSpeedingId', color: '#ff8b00', label: 'Posted Speeding'}, // orange\r\n  {id: 'RuleHarshCorneringId', color: '#2673bb', label: 'Harsh Cornering'}, // blue\r\n  {id: 'RuleHarshBrakingId', color: '#ffc400', label: 'Harsh Braking'}, // yellow\r\n  {id: 'RuleJackrabbitStartsId', color: 'red', label: 'Reverse Starting'},\r\n  {id: 'RuleSeatbeltId', color: '#00875a', label: 'Seatbelt'} // green\r\n];\r\n\r\nfunction getToolTip(object) {\r\n  if (object !== null && object.layer !== null && object.layer.id === 'vehicles')\r\n  {\r\n    const vehicle = object.object;\r\n    if (vehicle !== null && vehicle !== undefined) {\r\n      //console.log(vehicle);\r\n      const retValue = {\r\n        html: `<div>\r\n              Vehicle ID: <b>${vehicle.id}</b> <br/>\r\n              Mean distance: <b>${vehicle.distance} km </b> <br/>\r\n              Mean speed: <b>${vehicle.speed} km/h</b> <br/>\r\n              Date: <b>${vehicle.date}</b> <br/>\r\n              </div>`\r\n        };\r\n      return retValue;\r\n    }\r\n  }\r\n  else if (object !== null && object.layer !== null && object.layer.id.startsWith('iconClusterLayer-')) {\r\n    const exception = object.object && object.object.properties;\r\n    if (exception) {\r\n      if (exception.cluster)\r\n      {\r\n        //console.log(exception);\r\n        const exceptions = object.layer.state.index\r\n            .getLeaves(exception.cluster_id, 25)\r\n            .map(f => f.properties);\r\n        let html = `<div>`;\r\n        exceptions.slice(0, 10).map(excep => {\r\n          const exceptionLabel = exceptionIds.filter(exceptionData => {\r\n            return exceptionData['id'] === excep.type_exception\r\n            })[0].label;\r\n          html = html + `\r\n            Vehicle ID: <b>${excep.device_id}</b> <br/>\r\n          Exception: <b>${exceptionLabel}</b> <br/>`\r\n          return null;\r\n        });\r\n        if (exceptions.length > 10) {\r\n          html = html + `[...]`  \r\n        }\r\n        html = html + `</div>`;\r\n        const retValue = {\r\n          html: html\r\n        };\r\n        return retValue;\r\n      }\r\n      else if (exception)\r\n      {\r\n        const exceptionLabel = exceptionIds.filter(exceptionData => {\r\n          return exceptionData['id'] === exception.type_exception\r\n        })[0].label;\r\n        const retValue = {\r\n          html: `<div>\r\n                Vehicle ID: <b>${exception.device_id}</b> <br/>\r\n                Exception: <b>${exceptionLabel}</b> <br/>\r\n                Date: <b>${exception.date}</b> <br/>\r\n                </div>`\r\n          };\r\n        return retValue;\r\n      }\r\n    }\r\n\r\n  }\r\n  return null;\r\n}\r\n\r\nconst Map = ({data_veh, data_excep, filter_layers, width, height}) => {\r\n//function Map({data_veh, data_excep, filter_layers, width, height}) { \r\n  const [selectedVehicle, setSelectedVehicle] = useState ([\r\n    {\r\n      id: null\r\n    }\r\n  ]);\r\n\r\n  const onHover = ({x, y, object}) => {\r\n    if(object) {\r\n      setSelectedVehicle({id: object.id});\r\n    } else {\r\n      setSelectedVehicle({id: null});\r\n    }\r\n  }\r\n\r\n  const getLineColor = (vehicle) => {\r\n      const selected = vehicle.id === selectedVehicle.id;\r\n      return selected ? [255, 0, 0] : [0, 0, 128];\r\n  }\r\n  const getLineWidth = (vehicle) => {\r\n    const selected = vehicle.id === selectedVehicle.id;\r\n    return selected ? 10 : 2;\r\n}\r\n\r\n  var layers = [];\r\n  //console.log(filter_layers);\r\n  if (filter_layers.indexOf('vehicles') >= 0) {\r\n    //console.log(data_veh)\r\n    const vehiclesNoTunnel = {\r\n      type: \"FeatureCollection\",\r\n      features: data_veh.features.filter(vehicle => {\r\n        return vehicle['tunnel'] !== 1\r\n      })\r\n    } \r\n    const vehiclesTunnel = {\r\n      type: \"FeatureCollection\",\r\n      features: data_veh.features.filter(vehicle => {\r\n        return vehicle['tunnel'] === 1\r\n      })\r\n    } \r\n    layers.push(new GeoJsonLayer({\r\n      id: 'vehicles',\r\n      data: vehiclesNoTunnel,\r\n      stroked: false,\r\n      filled: true,\r\n      lineWidthMinPixels: 0.5,\r\n      getLineWidth: getLineWidth,\r\n      parameters: {\r\n        depthTest: false\r\n      },\r\n      pickable: true,\r\n      getLineColor: getLineColor,\r\n      onHover: onHover,\r\n      updateTriggers: {\r\n        getLineColor: [selectedVehicle],\r\n        getLineWidth: [selectedVehicle]\r\n      }\r\n    }));\r\n    layers.push(new GeoJsonLayer({\r\n      id: 'vehicles_tunnel',\r\n      data: vehiclesTunnel,\r\n      stroked: false,\r\n      filled: true,\r\n      lineWidthMinPixels: 0.5,\r\n      getLineWidth: getLineWidth,\r\n      parameters: {\r\n        depthTest: false\r\n      },\r\n      pickable: true,\r\n      getLineColor: getLineColor,\r\n      onHover: onHover,\r\n      updateTriggers: {\r\n        getLineColor: [selectedVehicle],\r\n        getLineWidth: [selectedVehicle]\r\n      },\r\n      extensions: [new PathStyleExtension({dash: true})],\r\n      getDashArray: [3, 2],\r\n      dashJustified: true,\r\n      dashGapPickable: true\r\n    }));\r\n  }\r\n  filter_layers.map((layerName) => {\r\n    if (layerName !== 'vehicles') {\r\n      const filteredExceptions = data_excep.filter(exception => {\r\n        return exception['type_exception'] === layerName\r\n      });\r\n      //console.log(filteredExceptions);\r\n      if (filteredExceptions.length > 0) {\r\n        //console.log(filteredExceptions);\r\n        layers.push(new IconClusterLayer({\r\n          id: 'iconClusterLayer-' + layerName,\r\n          layerId: 'icon-' + layerName,\r\n          data: filteredExceptions,\r\n          iconMapping : IconMappingJson,\r\n          iconAtlas : '/data/icon_atlas/location-icon-atlas-' + layerName + '.png',\r\n          sizeScale: 60,\r\n          getPosition: d => d.coordinates\r\n        }));  \r\n      }\r\n    }\r\n    return null;\r\n  });\r\n\r\n  //console.log('Render map');\r\n  //console.log(data_excep);\r\n\r\n  return (\r\n    <DeckGL\r\n      initialViewState={INITIAL_VIEW_STATE}\r\n      controller={true} \r\n      layers={[layers]}\r\n      pickingRadius={5}\r\n      style={{position:\"relative\"}}\r\n      height={height}\r\n      getTooltip={getToolTip}\r\n    >\r\n      <StaticMap mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}/>\r\n    </DeckGL>\r\n  );\r\n}\r\nexport default Map;\r\n\r\n","import React from 'react';\r\nimport chroma from 'chroma-js';\r\n\r\nimport Select from 'react-select';\r\nimport makeAnimated from 'react-select/animated';\r\nimport {exceptionIds} from './../map/Map';\r\n\r\nconst animatedComponents = makeAnimated();\r\nexport let layerOptions = [\r\n    { value: 'vehicles', label: 'Vehículos', color:'black' }\r\n    //{ value: 'exceptions', label: 'Infracciones' }\r\n  ]\r\n\r\nexceptionIds.map((exception) => layerOptions.push({value: exception.id, label: exception.label, color: exception.color}));\r\n\r\nconst colourStyles = {\r\n  control: styles => ({ ...styles, backgroundColor: 'white' }),\r\n  option: (styles, { data, isDisabled, isFocused, isSelected }) => {\r\n    const color = chroma('pink'); // color de fondo cuando vas a seleccionar en el menu\r\n    return {\r\n      ...styles,\r\n      backgroundColor: isDisabled\r\n        ? null\r\n        : isSelected\r\n        ? data.color\r\n        : isFocused\r\n        ? color.alpha(0.1).css()\r\n        : null,\r\n      color: isDisabled\r\n        ? '#ccc'\r\n        : isSelected\r\n        ? chroma.contrast(color, 'white') > 2\r\n          ? 'white'\r\n          : 'black'\r\n        : data.color,\r\n      cursor: isDisabled ? 'not-allowed' : 'default',\r\n\r\n      ':active': {\r\n        ...styles[':active'],\r\n        backgroundColor:\r\n          !isDisabled && (isSelected ? data.color : color.alpha(0.3).css()),\r\n      },\r\n    };\r\n  },\r\n  multiValue: (styles, { data }) => { // color cuando esta seleccionado \r\n    const color = chroma(data.color);\r\n    //console.log('color')\r\n    //console.log(color)\r\n    //console.log('data mariaa')\r\n    //console.log(data)\r\n    return {\r\n      \r\n      ...styles,\r\n      backgroundColor: color.alpha(0.1).css(),\r\n    };\r\n  },\r\n  multiValueLabel: (styles, { data }) => ({ // ni idea \r\n    ...styles,\r\n    color: data.color,\r\n  }),\r\n  multiValueRemove: (styles, { data }) => ({\r\n    ...styles,\r\n    color: data.color,\r\n    ':hover': {\r\n      backgroundColor: data.color,\r\n      color: 'white',\r\n    },\r\n  }),\r\n};\r\n\r\nfunction LayerSelector({onChange_layer_selection}) {\r\n  return (\r\n    <Select\r\n      closeMenuOnSelect={false}\r\n      components={animatedComponents}\r\n      defaultValue={layerOptions}\r\n      isMulti\r\n      options={layerOptions}\r\n      onChange={onChange_layer_selection}\r\n      styles={colourStyles}\r\n    />\r\n  );\r\n  \r\n}\r\n\r\nexport default LayerSelector;\r\n","\r\n\r\nexport default function GetNumIds({vehicles}) {\r\n  let lookup = new Set();\r\n  const vehs = vehicles.features;\r\n  vehs.map(vehicle => lookup.add(vehicle.id));\r\n  //console.log(lookup);\r\n  if (lookup.size === 0) {\r\n    return '-';\r\n  } else {\r\n    return lookup.size;\r\n  }\r\n}\r\n","\r\nexport default function GetMeanSpeed({vehicles}) {\r\n  const vehs = vehicles.features;\r\n  if (vehs.length === 0) {\r\n    return \"-\";\r\n  } else {\r\n    let lookup = new Set();\r\n    let contador = 0;\r\n    let totalSpeed = 0;\r\n    vehs.map(vehicle => {\r\n      const uniquevalue = vehicle.id + '-' + vehicle.date; \r\n      if (!lookup.has(uniquevalue)) {\r\n        totalSpeed += vehicle.speed;\r\n        contador += 1;\r\n      }\r\n      return null;\r\n    });\r\n    //console.log(\"totalSpeed=\" + totalSpeed + \"  contador=\" + contador);\r\n    return Math.round(totalSpeed/contador) + ' km/h';\r\n  }\r\n}","\r\nexport default function GetMeanDistance({vehicles}) {\r\n  const vehs = vehicles.features;\r\n  if (vehs.length === 0) {\r\n    return \"-\";\r\n  } else {\r\n    let lookup = new Set();\r\n    let contador = 0;\r\n    let totalDistance = 0;\r\n    vehs.map(vehicle => {\r\n      const uniquevalue = vehicle.id + '-' + vehicle.date; \r\n      //console.log(uniquevalue);\r\n      if (!lookup.has(uniquevalue)) {\r\n        lookup.add(uniquevalue);\r\n        totalDistance += vehicle.distance;\r\n        contador += 1;\r\n      }\r\n      return null;\r\n    });\r\n\r\n    //console.log(\"totalDistance=\" + totalDistance + \"  contador=\" + contador);\r\n    return Math.round(totalDistance/contador) + \" km\";\r\n  }\r\n}\r\n  ","\r\nexport default function GetFuelGastado(fuels) {\r\n  const fuel_vehs = fuels.fuels;\r\n  let total_fuel_gastado = 0;\r\n  let distancia_recorrida = 0;\r\n\r\n  fuel_vehs.map((fuel_veh) => {\r\n    if (fuel_veh.diff_fuel > 0) {\r\n      total_fuel_gastado += parseFloat(fuel_veh.diff_fuel);\r\n      distancia_recorrida += parseFloat(fuel_veh.distance);\r\n    }\r\n    return null;\r\n  });\r\n\r\n  console.log(\"total_fuel_gastado=\" + total_fuel_gastado + \"  distancia_recorrida=\" + distancia_recorrida);\r\n\r\n  if (distancia_recorrida === 0) {\r\n    return \"-\";\r\n  }\r\n  // distancia esta en mts, lo convertimos a km y hayamos la media por cada 100km\r\n  const mean_gastado = (total_fuel_gastado * 100) / (distancia_recorrida / 1000);\r\n  return Math.round(mean_gastado) + \" l/100km\";\r\n}\r\n","import \"./Main.css\";\nimport Map from \"../map/Map\";\n\nimport React, { useState } from 'react';\n//import 'react-calendar/dist/Calendar.css';\n//import CollapsableCalendar from '../calendar/calendar';\nimport LayerSelector from \"../layers/layers\";\nimport {layerOptions} from \"../layers/layers\";\nimport 'react-date-range/dist/styles.css'; // main css file\nimport 'react-date-range/dist/theme/default.css'; // theme css file\nimport Moment from 'moment';\n\nimport GetNumIds from \"../kpis/kpi_numvehicles\"\nimport GetMeanSpeed from \"../kpis/kpi_meanspeed\"\nimport GetMeanDistance from \"../kpis/kpi_meandistance\"\nimport GetFuelGastado from  \"../kpis/kpi_consumedfuel\"\n\n\nfunction GetNumExcep({exceptions}) {\n  if (exceptions.length === 0) {\n    return '-';\n  } else {\n    return exceptions.length;\n  }\n}\n\nfunction makeCancelablePromise(promise) {\n  let isCanceled = false;\n  const wrappedPromise =\n    new Promise((resolve, reject) => {\n    // Suppress resolution and rejection if canceled\n    promise\n        .then((val) => (!isCanceled && resolve(val)))\n        .catch((error) => (!isCanceled && reject(error)));\n    });\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      isCanceled = true;\n    },\n  };\n}\n\nconst Main = (params) => {\n  const [last_date_range, setDateRange] = useState (\n    {\n        startDate: new Date(),\n        endDate: new Date(),\n        key: 'selection'\n    }\n  );\n  const [filtered_vehicles, filterVehicles] = useState (\n    {\n      type: 'FeatureCollection',\n      features: []\n    }\n  );\n  const [filtered_exceptions, filterExceptions] = useState (\n    {\n      features: []\n    }\n  );\n  const [filtered_fuel, filterFuel] = useState([]);\n  const [filterLayers, setFilterLayers] = useState(\n    {\n      initial: 1 // need to mark it for initial update\n    }\n  );\n  const [fetch_promises, setPromises] = useState(\n    {\n      fetchVehicles: null,\n      fetchExceptions: null,\n      fetchFuel: null\n    }\n  );\n\n  const handleLayerSelectOption = (options) => {\n    var newLayers = []\n\n    options.map((option) => newLayers.push(option.value));\n    setFilterLayers(newLayers);\n    //console.log(newLayers);\n  }\n\n  // initial update\n  if(filterLayers.initial === 1) {\n    handleLayerSelectOption(layerOptions);\n  }\n\n  if (last_date_range.startDate.getTime() !== params.calendar_ranges.startDate.getTime() ||\n      last_date_range.endDate.getTime() !== params.calendar_ranges.endDate.getTime())\n  {\n    //console.log(last_date_range)\n    //console.log(params.calendar_ranges)\n    setDateRange(params.calendar_ranges);\n  \n    if (fetch_promises.fetchVehicles !== null) {\n      fetch_promises.fetchVehicles.cancel();\n    }\n    if (fetch_promises.fetchExceptions !== null) {\n      fetch_promises.fetchExceptions.cancel();\n    }\n    if (fetch_promises.fetchFuel !== null) {\n      fetch_promises.fetchFuel.cancel();\n    }\n    // create an array with filenames to fetch\n    var vehicles_files = []\n    var exceptions_files = []\n    var fuel_files = []\n\n    var iterateDate = new Date(params.calendar_ranges.startDate)\n    while(iterateDate <= params.calendar_ranges.endDate) {\n      const datestring = Moment(iterateDate).format('YYYYMMDD');\n      iterateDate.setDate(iterateDate.getDate() + 1);\n      //console.log(datestring);\n      // ** exceptions ** \n      const exceptions_filename = '/data/all_exceptions/exceptions_' + datestring + '.json';\n      exceptions_files.push(exceptions_filename);\n      const vehicles_filename = '/data/all_vehicles/vehicles_' + datestring + '.json';\n      vehicles_files.push(vehicles_filename)\n      const fuel_filename = '/data/all_fuel/fuel_' + datestring + '.json';\n      fuel_files.push(fuel_filename)\n    } \n    //console.log(exceptions_files);\n\n    // fetch all needed vehicles files and set filtered_vehicles\n    let fetchVehiclesPromise = makeCancelablePromise(Promise.all(\n      vehicles_files.map(filename => \n        fetch(filename)\n          .then(res => res.text())\n          .then(text => {\n            try {\n              const json = JSON.parse(text);\n              return json.features;\n            } catch(err) {\n              //console.log(text);\n              //console.log(filename + ':\\n' + err)\n              return [];\n            }\n          })\n        ) \n      ).then(new_vehicles => {\n          const all_vehicles = [].concat.apply([], new_vehicles);\n          //console.log(all_vehicles);\n          filterVehicles({\n            type: 'FeatureCollection',\n            features: all_vehicles\n          });\n          return all_vehicles;\n          //console.log(filtered_vehicles);\n      })\n    );\n\n    // fetch all needed exception files and set filtered_exceptions\n    let fetchExceptionsPromise = makeCancelablePromise(Promise.all(\n      exceptions_files.map(filename => \n        fetch(filename)\n          .then(res => res.text())\n          .then(text => {\n            try {\n              const json = JSON.parse(text);\n              return json.features;\n            } catch(err) {\n              //console.log(filename + ':\\n' + err)\n              return [];\n            }\n          })\n        ) \n      ).then(new_exceptions => {\n        const all_exceptions = [].concat.apply([], new_exceptions);\n        console.log(all_exceptions);\n        filterExceptions({\n            features: all_exceptions\n        });\n        //console.log(all_exceptions);\n      })\n    );\n\n    // fetch all needed fuel files and set filtered_fuel\n    let fetchFuelPromise = makeCancelablePromise(Promise.all(\n        fuel_files.map(filename => \n          fetch(filename)\n            .then(res => res.text())\n            .then(text => {\n              try {\n                //console.log('hola')\n                const json = JSON.parse(text);\n                //console.log(json)\n                return json.features;\n              } catch(err) {\n                console.log(filename + ':\\n' + err)\n                //console.log(text)\n                return [];\n              }\n            })\n        ) \n      ).then(new_fuel => {\n          const all_fuel = [].concat.apply([], new_fuel);\n          //console.log(all_fuel);\n          filterFuel(all_fuel.slice(0));\n          //console.log('filtered_fuel');\n          //console.log(filtered_fuel);\n      })\n    );\n\n    setPromises(\n      {\n        fetchVehicles : fetchVehiclesPromise,\n        fetchExceptions : fetchExceptionsPromise,\n        fetchFuel : fetchFuelPromise\n      }\n    );\n  }\n\n  return (\n    <main> \n      <div className=\"main__container\">\n        {/* <!-- CHARTS STARTS HERE --> */}\n        <div className=\"charts\">\n          <div className=\"charts__left\">\n            \n              <Map data_veh={filtered_vehicles} data_excep={filtered_exceptions.features} filter_layers={filterLayers} width=\"50vw\" height=\"100%\" />\n            </div>\n\n          <div className=\"charts__right__cards\">            \n          \n              <div className=\"ExceptionButtons\">\n                <p className=\"capas\">CAPAS</p>\n                <LayerSelector onChange_layer_selection={handleLayerSelectOption}/>\n              </div>\n          <div>\n            <div id=\"cards\" className=\"card1\">\n              <h2>\n                Número de vehículos: <br/>\n                <GetNumIds vehicles={filtered_vehicles} />\n              </h2>\n            </div>\n\n            <div id=\"cards\" className=\"card2\">\n              <h2>\n                Distancia media recorrida <br/>\n                <GetMeanDistance vehicles={filtered_vehicles}/> \n              </h2>\n            </div>\n\n            <div id=\"cards\" className=\"card3\">\n              <h2>\n                Velocidad media <br/>\n                <GetMeanSpeed vehicles={filtered_vehicles}/>\n              </h2>\n            </div>\n\n            <div id=\"cards\" className=\"card4\">\n              <h2>\n                Total infracciones: <br/>\n                <GetNumExcep exceptions={filtered_exceptions.features} />\n              </h2>\n            </div>\n\n            <div id=\"cards\" className=\"card5\">\n              <h2>\n                Promedio de combustible gastado: <br/>\n                <GetFuelGastado fuels={filtered_fuel} />\n                </h2>\n            </div>\n          </div>\n        \n          </div>\n      </div>\n        {/* <!-- CHARTS ENDS HERE --> */}\n      </div>\n    </main>\n  );\n};\n\nexport default Main;\n","import React from 'react';\r\nimport {\r\n  XYPlot,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  VerticalBarSeries,\r\n  VerticalBarSeriesCanvas,\r\n  LabelSeries,\r\n  DiscreteColorLegend\r\n} from \"react-vis\";\r\nimport Moment from 'moment';\r\n\r\nimport myData from './data_charts/distance_chart.json';\r\nconst orangeData = [{x: 'A', y: 20}, {x: 'B', y: 3}, {x: 'C', y: 10}];\r\n\r\nconst blueData = [{x: 'A', y: 12}, {x: 'B', y: 2}, {x: 'C', y: 11}];\r\n\r\n\r\nfunction filterDataFromDates(startDate, endDate) {\r\n  const startDateString = Moment(startDate).format('YYYY/MM/DD');\r\n  const endDateString = Moment(endDate).format('YYYY/MM/DD');\r\n  var filteredData = myData.filter(data => {\r\n      return data.x >= startDateString && data.x <= endDateString\r\n    });\r\n\r\n  console.log(filteredData);\r\n  return filteredData;\r\n}\r\n\r\nexport default class DistanceChart extends React.Component {\r\n  \r\n  state = {\r\n    useCanvas: false,\r\n    data: null,\r\n    min: 0,\r\n    max: 0,\r\n    old_calendar_ranges: {\r\n      startDate: new Date(),\r\n      endDate: new Date()}\r\n  };\r\n\r\n  render() {\r\n    const cur_calendar_ranges = this.props.calendar_ranges;\r\n    const old_calendar_ranges = this.state.old_calendar_ranges;\r\n    \r\n    if (this.state.data === null ||\r\n        old_calendar_ranges.startDate.getTime() !== cur_calendar_ranges.startDate.getTime() ||\r\n        old_calendar_ranges.endDate.getTime() !== cur_calendar_ranges.endDate.getTime()) {\r\n      let newState = this.state;\r\n      newState.old_calendar_ranges = cur_calendar_ranges;\r\n      newState.data = filterDataFromDates(this.props.calendar_ranges.startDate, this.props.calendar_ranges.endDate);\r\n      const {min, max} = newState.data.reduce(\r\n        (acc, row) => ({\r\n          min: Math.min(acc.min, row.y),\r\n          max: Math.max(acc.max, row.y)\r\n        }),\r\n        {min: Infinity, max: -Infinity}\r\n      );\r\n      newState.min = min;\r\n      newState.max = max;\r\n      console.log(min + '  ' + max);\r\n      this.state = newState;\r\n    }\r\n\r\n    const {useCanvas, data} = this.state;\r\n    const BarSeries = useCanvas ? VerticalBarSeriesCanvas : VerticalBarSeries;\r\n    return (\r\n      <div>\r\n        <XYPlot xType=\"ordinal\" width={300} height={300} xDistance={100}>\r\n          <VerticalGridLines />\r\n          <HorizontalGridLines />\r\n          <XAxis tickLabelAngle={-45} />\r\n          <YAxis />\r\n          <BarSeries className=\"vertical-bar-series-example\" data={data} />        \r\n        </XYPlot>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport {\r\n  XYPlot,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  VerticalBarSeries,\r\n  VerticalBarSeriesCanvas,\r\n  LabelSeries,\r\n  DiscreteColorLegend\r\n} from \"react-vis\";\r\nimport Moment from 'moment';\r\n\r\nimport myData from './data_charts/driving_time_chart.json';\r\n\r\n\r\nfunction filterDataFromDates(startDate, endDate) {\r\n  const startDateString = Moment(startDate).format('YYYY/MM/DD');\r\n  const endDateString = Moment(endDate).format('YYYY/MM/DD');\r\n  var filteredData = myData.filter(data => {\r\n      return data.x >= startDateString && data.x <= endDateString\r\n    });\r\n\r\n  console.log(filteredData);\r\n  return filteredData;\r\n}\r\n\r\nexport default class DrivingTimeChart extends React.Component {\r\n  state = {\r\n    useCanvas: false,\r\n    data: null,\r\n    min: 0,\r\n    max: 0,\r\n    old_calendar_ranges: {\r\n      startDate: new Date(),\r\n      endDate: new Date()}\r\n  };\r\n\r\n  render() {\r\n    const cur_calendar_ranges = this.props.calendar_ranges;\r\n    const old_calendar_ranges = this.state.old_calendar_ranges;\r\n    if (this.state.data === null ||\r\n        old_calendar_ranges.startDate.getTime() !== cur_calendar_ranges.startDate.getTime() ||\r\n        old_calendar_ranges.endDate.getTime() !== cur_calendar_ranges.endDate.getTime()) {\r\n      let newState = this.state;\r\n      newState.old_calendar_ranges = cur_calendar_ranges;\r\n      newState.data = filterDataFromDates(this.props.calendar_ranges.startDate, this.props.calendar_ranges.endDate);\r\n      const {min, max} = newState.data.reduce(\r\n        (acc, row) => ({\r\n          min: Math.min(acc.min, row.y),\r\n          max: Math.max(acc.max, row.y)\r\n        }),\r\n        {min: Infinity, max: -Infinity}\r\n      );\r\n      newState.min = min;\r\n      newState.max = max;\r\n      console.log(min + '  ' + max);\r\n      this.state = newState;\r\n    }\r\n\r\n    const {useCanvas, data} = this.state;\r\n    const BarSeries = useCanvas ? VerticalBarSeriesCanvas : VerticalBarSeries;\r\n    return (\r\n      <div>\r\n        <XYPlot xType=\"ordinal\" width={300} height={300} xDistance={100}>\r\n          <VerticalGridLines />\r\n          <HorizontalGridLines />\r\n          <XAxis tickLabelAngle={-45} />\r\n          <YAxis />\r\n          <BarSeries className=\"vertical-bar-series-example\" data={data} />\r\n        </XYPlot>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, {Component} from 'react';\r\nimport {scaleLinear} from 'd3-scale';\r\nimport {XYPlot, XAxis, YAxis, HeatmapSeries, LabelSeries, Hint} from \"react-vis\";\r\nimport Moment from 'moment';\r\n\r\nimport heatmap_data from './data_charts/num_vehicles_chart.json';\r\n\r\nconst daysWeek = ['L', 'M', 'X', 'J', 'V', 'S', 'D'];\r\n//const hours = ['00','01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24'];  \r\nconst hours = ['24','23','22','21','20','19','18','17','16','15','14','13','12','11','10','09','08','07','06','05','04','03','02','01','00'];  \r\n\r\nfunction filterDataFromDates(startDate, endDate) {\r\n  let dictData= {};\r\n  daysWeek.map(day => {\r\n    dictData[day] = {};\r\n    hours.map(hour => dictData[day][hour] = 0);\r\n  });\r\n  const startDateString = Moment(startDate).format('YYYY/MM/DD');\r\n  const endDateString = Moment(endDate).format('YYYY/MM/DD');\r\n  heatmap_data.map(element => {\r\n    if ((element[\"date\"] >= startDateString) && (element[\"date\"] <= endDateString)) {\r\n      if (dictData[element.x] == undefined)\r\n      {\r\n        dictData[element.x] = {};\r\n      }\r\n      if (dictData[element.x][element.y] == undefined) {\r\n        dictData[element.x][element.y] = parseInt(element.num_vehs);\r\n      }\r\n      else {\r\n        dictData[element.x][element.y] += parseInt(element.num_vehs);\r\n      }\r\n      //console.log(dictData[element.x][element.y]);\r\n    }\r\n  });\r\n\r\n  let myData = [];\r\n  Object.keys(dictData).map((x, index1) => ( \r\n    Object.keys(dictData[x]).map((y, index2) => (\r\n      myData.push({x: x, y: y, num_vehs: dictData[x][y]})))));\r\n\r\n  //console.log(dictData);\r\n  //console.log(myData);\r\n  return myData;\r\n}\r\n\r\nexport default class NumVehiclesChart extends Component {\r\n  state = {\r\n    value: false,\r\n    data: null,\r\n    min: 0,\r\n    max: 0,\r\n    old_calendar_ranges: {\r\n      startDate: new Date(),\r\n      endDate: new Date()}\r\n};\r\n\r\n  render () {\r\n    const cur_calendar_ranges = this.props.calendar_ranges;\r\n    const old_calendar_ranges = this.state.old_calendar_ranges;\r\n    if (this.state.data === null ||\r\n        old_calendar_ranges.startDate.getTime() !== cur_calendar_ranges.startDate.getTime() ||\r\n        old_calendar_ranges.endDate.getTime() !== cur_calendar_ranges.endDate.getTime()) {\r\n      this.state.old_calendar_ranges = cur_calendar_ranges;\r\n      this.state.data = filterDataFromDates(this.props.calendar_ranges.startDate, this.props.calendar_ranges.endDate);\r\n      //console.log(cur_calendar_ranges);\r\n      //console.log(old_calendar_ranges);\r\n      //console.log(this.state.data);\r\n      const {min, max} = this.state.data.reduce(\r\n        (acc, row) => ({\r\n          min: Math.min(acc.min, row.num_vehs),\r\n          max: Math.max(acc.max, row.num_vehs)\r\n        }),\r\n        {min: Infinity, max: -Infinity}\r\n      );\r\n      this.state.min = min;\r\n      this.state.max = max;\r\n    }\r\n    \r\n    const {value, data} = this.state;\r\n    const exampleColorScale = scaleLinear()\r\n    .domain([this.state.min, (this.state.min + this.state.max) / 2, this.state.max])\r\n    .range(['orange', 'white', 'cyan']);\r\n\r\n    return (\r\n      <XYPlot\r\n        xType=\"ordinal\"\r\n        xDomain={daysWeek}\r\n        yType=\"ordinal\"\r\n        yDomain={hours}\r\n        margin={50}\r\n        width={500}\r\n        height={700}\r\n        >\r\n      <XAxis orientation=\"top\" />\r\n      <YAxis />\r\n      <HeatmapSeries\r\n        colorType=\"literal\"\r\n        getColor={d => exampleColorScale(d.num_vehs)}\r\n        style={{\r\n          stroke: 'white',\r\n          strokeWidth: '2px',\r\n          rectStyle: {\r\n            rx: 10,\r\n            ry: 10\r\n          }\r\n        }}\r\n        className=\"heatmap-series-example\"\r\n        data={data}\r\n        onValueMouseOver={v => this.setState({value: v})}\r\n        onSeriesMouseOut={v => this.setState({value: false})}\r\n        />\r\n      <LabelSeries\r\n        style={{pointerEvents: 'none'}}\r\n        data={data}\r\n        labelAnchorX=\"middle\"\r\n        labelAnchorY=\"baseline\"\r\n        getLabel={d => `${d.num_vehs}`}\r\n        />\r\n      {value !== false && <Hint value={value} />}\r\n      </XYPlot>\r\n    );\r\n  }\r\n}","import React from 'react';\r\n\r\n//import Sunburst from 'sunburst';\r\nimport {Sunburst, LabelSeries} from 'react-vis';\r\n\r\nimport exception_data from './data_charts/exceptions_chart.json';\r\nimport Moment from 'moment';\r\n\r\n//console.log(exception_data['2021/02/01']) OK\r\n\r\n\r\n//var dic_all = {} //\"children\": [dic_vehicles]\r\n\r\nlet dic_values = {} //rule:value\r\nlet dic_colors = {} //rule:color\r\nconst exception_list = [\"all_vehicles\", \"Posted Speeding\", \"Harsh Cornering\", \"Harsh Braking\", \"Reverse Starting\", \"Seatbelt\"]\r\nconst colors = [\"#12939A\",\"#42f59b\", \"#f5e342\",\"#f58442\",\"#9e42f5\",\"0000\"]\r\nfor (var i = 0; i < exception_list.length; i++) { \r\n  dic_values[exception_list[i]] = 0;\r\n  dic_colors[exception_list[i]] = colors[i];\r\n}\r\n\r\n\r\nconst EXTENDED_DISCRETE_COLOR_RANGE = [\r\n    '#19CDD7',\r\n    '#DDB27C',\r\n    '#88572C',\r\n    '#FF991F',\r\n    '#F15C17',\r\n    '#223F9A',\r\n    '#DA70BF',\r\n    '#125C77',\r\n    '#4DC19C',\r\n    '#776E57',\r\n    '#12939A',\r\n    '#17B8BE',\r\n    '#F6D18A',\r\n    '#B7885E',\r\n    '#FFCB99',\r\n    '#F89570',\r\n    '#829AE3',\r\n    '#E79FD5',\r\n    '#1E96BE',\r\n    '#89DAC1',\r\n    '#B3AD9E'\r\n  ]; \r\n\r\nconst LABEL_STYLE = {\r\n  fontSize: '8px',\r\n  textAnchor: 'middle'\r\n};\r\n\r\n/**\r\n * Recursively work backwards from highlighted node to find path of valud nodes\r\n * @param {Object} node - the current node being considered\r\n * @returns {Array} an array of strings describing the key route to the current node\r\n */\r\nfunction getKeyPath(node) {\r\n  if (!node.parent) {\r\n    return ['root'];\r\n  }\r\n\r\n  return [(node.data && node.data.name) || node.name].concat(\r\n    getKeyPath(node.parent)\r\n  );\r\n}\r\n\r\n/**\r\n * Recursively modify data depending on whether or not each cell has been selected by the hover/highlight\r\n * @param {Object} data - the current node being considered\r\n * @param {Object|Boolean} keyPath - a map of keys that are in the highlight path\r\n * if this is false then all nodes are marked as selected\r\n * @returns {Object} Updated tree structure\r\n */\r\nfunction updateData(data, keyPath) {\r\n  if (data.children) {\r\n    data.children.map(child => updateData(child, keyPath));\r\n  }\r\n  // add a fill to all the uncolored cells\r\n  if (!data.hex) {\r\n    data.style = {\r\n      fill: EXTENDED_DISCRETE_COLOR_RANGE[5]\r\n    };\r\n  }\r\n  data.style = {\r\n    ...data.style,\r\n    fillOpacity: keyPath && !keyPath[data.name] ? 0.2 : 1\r\n  };\r\n\r\n  return data;\r\n}\r\n\r\nfunction filterDataFromDates(startDate, endDate)\r\n{\r\n  const startDateString = Moment(startDate).format('YYYY/MM/DD');\r\n  const endDateString = Moment(endDate).format('YYYY/MM/DD');\r\n\r\n  var children_vehicles = [] // [{\"name\": \"RuleSeatbeltId\", \"hex\": \"#9e42f5\", \"value\": 2324}....]\r\n  var dic_vehicles = {} // \"name\": \"000 vehicles\", \"children\": children_vehicles\r\n  var dic_all = {} //\"children\": [dic_vehicles]\r\n  dic_values = {} //restart dic\r\n  for (var i = 0; i < exception_list.length; i++) { \r\n    dic_values[exception_list[i]] = 0;\r\n  }\r\n\r\n  Object.entries(exception_data).forEach(([date, exceptions]) => {\r\n    if ((date >= startDateString) && (date <= endDateString)) { // entre las 2 fechas \r\n      exceptions.map((exception_type) => {\r\n        const rule_id = exception_type[0]\r\n        const value_rule = exception_type[1]\r\n        dic_values[rule_id] += value_rule;\r\n      });\r\n    }\r\n  });\r\n  console.log(dic_values);\r\n\r\n  Object.entries(dic_values).forEach(([rule_id, value_rule]) => {\r\n    var dic_excep = {} //{\"name\": \"RuleSeatbeltId\", \"hex\": \"#9e42f5\", \"value\": 2324}\r\n    if (rule_id === 'all_vehicles'){\r\n      //pass\r\n    } else{\r\n      dic_excep['name'] = value_rule + '\\u000A' + rule_id;\r\n      dic_excep['hex'] = dic_colors[rule_id];\r\n      dic_excep['value'] = value_rule;\r\n    }\r\n    children_vehicles.push(dic_excep);\r\n  });\r\n  console.log(children_vehicles)\r\n  //console.log(children_vehicles[1]['value'])\r\n  dic_vehicles[\"name\"] = children_vehicles[1]['value'] +\r\n                         children_vehicles[2]['value'] + \r\n                         children_vehicles[3]['value'] +\r\n                         children_vehicles[4]['value'] +\r\n                         children_vehicles[5]['value'] +  \"\\n INFRACCIONES\";\r\n  dic_vehicles[\"children\"] = children_vehicles;\r\n  dic_all['children'] = [dic_vehicles];\r\n\r\n  //console.log('dic_all')\r\n  console.log(dic_all)\r\n\r\n  return updateData(dic_all, false);\r\n}\r\n\r\n//const decoratedData = updateDicData(new Date(), new Date());\r\n\r\nexport default class ExceptionsChart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pathValue: false,\r\n      data: null,\r\n      finalValue: 'INFRACCIONES',\r\n      clicked: false,\r\n      old_calendar_ranges: {\r\n        startDate: new Date(),\r\n        endDate: new Date()}\r\n      };\r\n  }\r\n\r\n  render() {\r\n    const cur_calendar_ranges = this.props.calendar_ranges;\r\n    const old_calendar_ranges = this.state.old_calendar_ranges;\r\n    if (this.state.data === null ||\r\n        old_calendar_ranges.startDate.getTime() !== cur_calendar_ranges.startDate.getTime() ||\r\n        old_calendar_ranges.endDate.getTime() !== cur_calendar_ranges.endDate.getTime()) {\r\n      let oldState =this.state; \r\n      oldState.data = filterDataFromDates(this.props.calendar_ranges.startDate, this.props.calendar_ranges.endDate);\r\n      oldState.old_calendar_ranges = cur_calendar_ranges;\r\n      //console.log(cur_calendar_ranges);\r\n      //console.log(old_calendar_ranges);\r\n      //console.log(this.state.data);\r\n      this.setState(oldState);\r\n    }\r\n\r\n    const {clicked, finalValue, pathValue, data} = this.state;\r\n    return (\r\n      <div className=\"basic-sunburst-example-wrapper\">\r\n        <div className=\"selection-text\">\r\n          {clicked ? 'pulsa para quitar la selección' : 'pulsa para seleccionar la infracción'}\r\n        </div>\r\n        <Sunburst\r\n          animation\r\n          className=\"basic-sunburst-example\"\r\n          hideRootNode\r\n          onValueMouseOver={node => {\r\n            if (clicked) {\r\n              return;\r\n            }\r\n            const path = getKeyPath(node).reverse();\r\n            const pathAsMap = path.reduce((res, row) => {\r\n              res[row] = true;\r\n              return res;\r\n            }, {});\r\n            this.setState({\r\n              finalValue: path[path.length - 1],\r\n              pathValue: path.join(' > '),\r\n              data: updateData(data, pathAsMap)\r\n            });\r\n          }}\r\n          onValueMouseOut={() =>\r\n            clicked\r\n              ? () => {}\r\n              : this.setState({\r\n                  pathValue: false,\r\n                  finalValue: false,\r\n                  data: updateData(data, false)\r\n                })\r\n          }\r\n          onValueClick={() => this.setState({clicked: !clicked})}\r\n          style={{\r\n            stroke: '#ddd',\r\n            strokeOpacity: 0.3,\r\n            strokeWidth: '0.5'\r\n          }}\r\n          colorType=\"literal\"\r\n          getSize={d => d.value}\r\n          getColor={d => d.hex}\r\n          data={data}\r\n          height={300}\r\n          width={350}\r\n        >\r\n          {finalValue && (\r\n            <LabelSeries\r\n              data={[{x: 0, y: 0, label: finalValue, style: LABEL_STYLE}]}\r\n            />\r\n          )}\r\n        </Sunburst>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Moment from 'moment';\r\n\r\nimport fuel_data from './data_charts/fuel_chart.json';\r\n\r\nimport {\r\n  XYPlot,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  MarkSeries,\r\n  LineSeries,\r\n  Hint\r\n} from 'react-vis';\r\n\r\nfunction filterDataFromDates(startDate, endDate) {\r\n  console.log(fuel_data)\r\n  const startDateString = Moment(startDate).format('YYYY/MM/DD');\r\n  const endDateString = Moment(endDate).format('YYYY/MM/DD');\r\n  let myData = fuel_data.filter(data => {\r\n    return data.x >= startDateString && data.x <= endDateString\r\n  });\r\n  console.log(myData)\r\n\r\n  return myData;\r\n}\r\n    \r\nexport default class FuelChart extends React.Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          value: null,\r\n        };\r\n        this.internaldata = {\r\n            data: null,\r\n            old_calendar_ranges: {\r\n              startDate: new Date(),\r\n              endDate: new Date()}\r\n          };\r\n      }\r\n\r\n    _forgetValue = () => {\r\n        this.setState({\r\n        value: null\r\n        });\r\n    };\r\n\r\n    _rememberValue = value => {\r\n        this.setState({value});\r\n    };\r\n\r\n    render() {\r\n        const cur_calendar_ranges = this.props.calendar_ranges;\r\n        const old_calendar_ranges = this.internaldata.old_calendar_ranges;\r\n        if (this.internaldata.data === null ||\r\n            old_calendar_ranges.startDate.getTime() !== cur_calendar_ranges.startDate.getTime() ||\r\n            old_calendar_ranges.endDate.getTime() !== cur_calendar_ranges.endDate.getTime()) {\r\n          this.internaldata.old_calendar_ranges = cur_calendar_ranges;\r\n          this.internaldata.data = filterDataFromDates(this.props.calendar_ranges.startDate, this.props.calendar_ranges.endDate);\r\n          console.log(cur_calendar_ranges);\r\n          console.log(old_calendar_ranges);\r\n          console.log(this.internaldata.data);\r\n        }\r\n\r\n        const {value} = this.state;\r\n        \r\n        if (cur_calendar_ranges.startDate === cur_calendar_ranges.endDate){\r\n          return (\r\n            <div style={{ marginTop: \"15px\" }}>\r\n              <XYPlot xType=\"ordinal\" width={300} height={300}>\r\n                  <VerticalGridLines />\r\n                  <HorizontalGridLines />\r\n                  <XAxis tickLabelAngle={-45} />\r\n                  <YAxis />\r\n                  <MarkSeries\r\n                  onValueMouseOver={this._rememberValue}\r\n                  onValueMouseOut={this._forgetValue}\r\n                  data={this.internaldata.data}\r\n                  />\r\n                  {value ? <Hint value={value} /> : null}\r\n              </XYPlot>\r\n            </div>\r\n            );\r\n        } else {\r\n          return (\r\n            <div style={{ marginTop: \"15px\" }}>\r\n              <XYPlot xType=\"ordinal\" height={300} width={300}>\r\n                <VerticalGridLines />\r\n                <HorizontalGridLines />\r\n                <XAxis tickLabelAngle={-45} />\r\n                <YAxis />\r\n                <LineSeries data={this.internaldata.data} color=\"yellow\" />\r\n              </XYPlot>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n    }\r\n}","import \"../../../node_modules/react-vis/dist/style.css\";\r\nimport './charts.css'\r\nimport {\r\n  XYPlot,\r\n  LineSeries,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  VerticalBarSeries,\r\n  VerticalBarSeriesCanvas,\r\n  LabelSeries\r\n} from \"react-vis\";\r\nimport DistanceChart from './distance_chart'\r\nimport DrivingTimeChart from './driving_time_chart'\r\nimport NumVehiclesChart from './num_vehicles_chart'\r\nimport ExceptionsChart from \"./exceptions_chart\"\r\nimport FuelChart from './fuel_chart'\r\n\r\n\r\nconst Chart = (params) => {\r\n  \r\n  return (\r\n    <div class=\"wrapper\">\r\n      <div class=\"box a\">\r\n        <h3 className=\"titulo_charts\">Distancia recorrida (km)</h3>\r\n        <DistanceChart calendar_ranges={params.calendar_ranges}/>\r\n      </div>\r\n      <div class=\"box b\">\r\n        <h3 className=\"titulo_charts\">Combustible consumido (l/100km)</h3>\r\n        <FuelChart calendar_ranges={params.calendar_ranges}/>\r\n      </div>\r\n      <div class=\"box c\"> \r\n        <h3 className=\"titulo_charts\">Tipos de infracción</h3>\r\n        <ExceptionsChart calendar_ranges={params.calendar_ranges}/>\r\n      </div>\r\n      <div class=\"box d\">\r\n        <h3 className=\"titulo_charts\">Vehículos según la hora y el día</h3>\r\n        <NumVehiclesChart calendar_ranges={params.calendar_ranges}/>\r\n      </div>\r\n      <div class=\"box e\">\r\n        <h3 className=\"titulo_charts\">Tiempo en conducción</h3>\r\n        <DrivingTimeChart calendar_ranges={params.calendar_ranges}/>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chart;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n//import App from '../pages/App';\r\nimport Main from \"../components/main/Main\";\r\nimport Charts from \"../components/charts/Charts\";\r\n\r\nconst Routes = (params) => {\r\n\r\n  return (\r\n    <Switch>\r\n      <Route \r\n        exact path=\"/\"\r\n        render={() => (<Main {...params} />)} />\r\n      <Route\r\n        path=\"/Charts\"\r\n        render={() => (<Charts {...params} />)} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","//import logo from './../logo.svg';\nimport './App.css';\nimport React, { useState } from 'react';\n\n//import Main from \"../components/main/Main\";\nimport Navbar from \"../components/navbar/Navbar\";\nimport Routes from \"./../routes/routes\"\n\n\nfunction App() {\n  const [date_range, setDateRange] = useState ([\n    {\n        startDate: new Date(),\n        endDate: new Date(),\n        key: 'selection'\n    }\n  ]);\n\n  function handleCalendarChange(ranges) {\n    setDateRange([ranges.selection]);\n  }\n\n\n  return (\n    \n    <div className=\"container\">\n      <Navbar calendar_onChange={handleCalendarChange} calendar_ranges={date_range}/>\n      <Routes calendar_ranges={date_range[0]}/>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './pages/App';\nimport reportWebVitals from './reportWebVitals';\n\n\nimport { BrowserRouter } from 'react-router-dom';\n\n<script src=\"https://cdn.jsdelivr.net/npm/semantic-ui-calendar-react@latest/dist/umd/semantic-ui-calendar-react.js\"/>\n\n\n/*\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);*/\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}